{
  "hash": "e0fd4ad08901c42576c3f2c642f79ab4",
  "result": {
    "markdown": "---\ntitle: \"Post-5\"\nsubtitle: \"Merging Data Sets\"\nauthor: \"\"\ndate: \"2024-04-10\"\ndate-modified: \"2024-04-10\"\ndraft: FALSE\n---\n\n## Cleaning Second Data Set\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.0     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(pROC)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nType 'citation(\"pROC\")' for a citation.\n\nAttaching package: 'pROC'\n\nThe following objects are masked from 'package:stats':\n\n    cov, smooth, var\n```\n:::\n\n```{.r .cell-code}\niowa_data <- read_csv(here::here(\"dataset\", \"Iowa_Probation_Recidivism_Status_20240403.csv\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 73076 Columns: 29\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (21): Race, Sex, Supervising Region Name, Work Unit Name, Jurisdiction, ...\ndbl  (6): Age, Cohort Fiscal Year, Report Fiscal Year, Time Served (Months),...\nlgl  (2): Under 18, Reincarcerated\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\niowa_data_clean <- iowa_data %>%\n  select(sex = Sex, race = Race, age = Age, reincarcerated = Reincarcerated)\nwrite_csv(iowa_data_clean, file = here::here(\"dataset\", \"iowa-data-clean.csv\"))\nnew_compas <- read_csv(here::here(\"dataset\", \"compas-scores-two-years-violent.csv\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nNew names:\n• `decile_score` -> `decile_score...12`\n• `priors_count` -> `priors_count...15`\n• `decile_score` -> `decile_score...40`\n• `priors_count` -> `priors_count...49`\n• `two_year_recid` -> `two_year_recid...53`\n• `two_year_recid` -> `two_year_recid...54`\n• `` -> `...55`\n• `` -> `...57`\n• `` -> `...58`\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: One or more parsing issues, call `problems()` on your data frame for details,\ne.g.:\n  dat <- vroom(...)\n  problems(dat)\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 4743 Columns: 58\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (34): name, first, last, compas_screening_date, sex, dob, age_cat, race,...\ndbl (20): id, age, juv_fel_count, decile_score...12, juv_misd_count, juv_oth...\nlgl  (4): violent_recid, reincarcerated, ...57, ...58\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nnew_compas_clean <- new_compas %>%\n  select(sex, age, race, reincarcerated)\nwrite_csv(new_compas_clean, file = here::here(\"dataset\", \"new-compas-clean.csv\"))\n```\n:::\n\n\n## Merging Data Set\n\n::: {.cell}\n\n```{.r .cell-code}\nnew_compas_clean <- new_compas_clean %>% mutate(state = \"Florida\")\niowa_data_clean <- iowa_data_clean %>% mutate(state = \"Iowa\")\ncombined_data <- bind_rows(new_compas_clean, iowa_data_clean)\nwrite_csv(combined_data, file = here::here(\"dataset\", \"combined-data.csv\"))\nsummary(combined_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     sex                 age            race           reincarcerated \n Length:77819       Min.   :16.10   Length:77819       Mode :logical  \n Class :character   1st Qu.:23.80   Class :character   FALSE:68007    \n Mode  :character   Median :30.80   Mode  :character   TRUE :9812     \n                    Mean   :33.48                                     \n                    3rd Qu.:40.60                                     \n                    Max.   :93.10                                     \n                    NA's   :1                                         \n    state          \n Length:77819      \n Class :character  \n Mode  :character  \n                   \n                   \n                   \n                   \n```\n:::\n:::\n\n\n## Further Analysis\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(combined_data, aes(x = age)) + geom_histogram(binwidth = 5, fill = \"blue\", color = \"black\") +\n  ggtitle(\"Age Distribution\") + xlab(\"Age\") + ylab(\"Frequency\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 1 row containing non-finite outside the scale range\n(`stat_bin()`).\n```\n:::\n\n::: {.cell-output-display}\n![](post5_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(combined_data, aes(x = sex, fill = reincarcerated)) + geom_bar(position = \"fill\") +\n  ggtitle(\"Reincarceration Rate by Sex\") + ylab(\"Proportion\")\n```\n\n::: {.cell-output-display}\n![](post5_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(combined_data, aes(x = race, fill = reincarcerated)) + geom_bar(position = \"fill\") +\n  ggtitle(\"Reincarceration Rate by Race\") + ylab(\"Proportion\") + theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](post5_files/figure-html/unnamed-chunk-3-3.png){width=672}\n:::\n\n```{.r .cell-code}\nchisq.test(table(combined_data$sex, combined_data$reincarcerated))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in chisq.test(table(combined_data$sex, combined_data$reincarcerated)):\nChi-squared approximation may be incorrect\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tPearson's Chi-squared test\n\ndata:  table(combined_data$sex, combined_data$reincarcerated)\nX-squared = 535.49, df = 2, p-value < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nchisq.test(table(combined_data$race, combined_data$reincarcerated))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tPearson's Chi-squared test\n\ndata:  table(combined_data$race, combined_data$reincarcerated)\nX-squared = 323.51, df = 5, p-value < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\ncombined_data$sex <- factor(combined_data$sex)\ncombined_data$sex <- relevel(combined_data$sex, ref = \"Male\")\ncombined_data$race <- factor(combined_data$race)\ncombined_data$race <- relevel(combined_data$race, ref = \"White\")\ncombined_data$state <- factor(combined_data$state)\ncombined_data$state <- relevel(combined_data$state, ref = \"Iowa\")\nmodel <- glm(reincarcerated ~ sex + age + race + state, data = combined_data, family = \"binomial\")\nsummary(model)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nglm(formula = reincarcerated ~ sex + age + race + state, family = \"binomial\", \n    data = combined_data)\n\nCoefficients:\n                                       Estimate Std. Error z value Pr(>|z|)    \n(Intercept)                          -1.5217363  0.0349386 -43.555  < 2e-16 ***\nsexFemale                            -0.6298041  0.0277782 -22.673  < 2e-16 ***\nsexUnknown                           -9.4696583 49.1930986  -0.192   0.8474    \nage                                  -0.0103943  0.0009578 -10.852  < 2e-16 ***\nraceAmerican Indian or Alaska Native  0.7087667  0.0791530   8.954  < 2e-16 ***\nraceAsian or Pacific Islander        -0.5486519  0.1062490  -5.164 2.42e-07 ***\nraceBlack                             0.2353887  0.0281868   8.351  < 2e-16 ***\nraceHispanic                         -0.2710693  0.0463436  -5.849 4.94e-09 ***\nraceOther                            -0.2643106  0.1408118  -1.877   0.0605 .  \nstateFlorida                          0.5982962  0.0399292  14.984  < 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 58968  on 77817  degrees of freedom\nResidual deviance: 57776  on 77808  degrees of freedom\n  (1 observation deleted due to missingness)\nAIC: 57796\n\nNumber of Fisher Scoring iterations: 10\n```\n:::\n:::\n\n\nFrom the Chi-squared test for sex and race with incarcerated, the results indicate statistically significant associations between both sex and race with reincarceration status in our combined dataset, as both p-values are well below the conventional alpha level of 0.05. The result from Chi-squared test for sex with incarcerated suggests that there is a significant association between an individual's sex and their likelihood of being reincarcerated. The data would likely show that one sex is more prone to reincarceration than the other. And the result from Chi-squared test for race with incarcerated indicates a significant association between an individual's race and their likelihood of being reincarcerated. Different races may have different reincarceration rates.\n\nThe logistic regression analysis on the dataset reveals significant insights into the factors influencing reincarceration rates. \"Male\", \"White\" and \"Iowa\" are the majority categories in sex, race, and state, and using them as the baseline would provide a point of comparison against the other categories, which can be quite informative, especially in highlighting differences or disproportionalities. The model highlights substantial sex-based differences in reincarceration odds, with females showing significantly lower odds compared to males. Age is another influential factor; younger individuals are more likely to be reincarcerated, underscoring the importance of targeted interventions for youth. Racial disparities are pronounced: American Indians or Alaska Natives exhibit higher reincarceration odds compared to Whites, while Asian or Pacific Islanders and Hispanics have lower odds. Blacks show slightly higher odds than Whites, highlighting nuanced differences among racial groups. Additionally, regional variations are evident, as individuals from Florida are significantly more likely to be reincarcerated than those from Iowa. The model's excellent fit, as indicated by AIC and changes in deviance, suggests that it effectively captures the underlying patterns in the data.",
    "supporting": [
      "post5_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}